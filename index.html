<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>WeedTracker V58 Pilot</title>
<link rel="stylesheet" href="styles.css" />
<link rel="icon" href="leaf.png" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>
<body>

<!-- Splash (version only here) -->
<div id="splash" class="splash">
  <div class="splash-card">
    <h1>ğŸŒ¿ WeedTracker</h1>
    <div class="tiny">V58 Pilot</div>
  </div>
</div>

<div id="spinner" class="spinner"></div>

<!-- HOME (7 darker rows, header removed) -->
<div id="home" class="screen active">
  <div class="home-stack">
    <button class="tile t1" data-target="createTask">ğŸ§¾ Create Task</button>
    <button class="tile t2" data-target="records">ğŸ“š Records</button>
    <button class="tile t3" data-target="batches">ğŸ§ª Batches</button>
    <button class="tile t4" data-target="inventory">ğŸ§ª Chemical Inventory</button>
    <button class="tile t5" data-target="procurement">ğŸ›’ Procurement</button>
    <button class="tile t6" data-target="mapping">ğŸ—ºï¸ Mapping</button>
    <button class="tile t7" data-target="settings">âš™ï¸ Settings</button>
  </div>
</div>

<!-- CREATE TASK -->
<div id="createTask" class="screen">
  <button class="home-btn">â¬… Home</button>
  <h2>ğŸ§¾ Create Task</h2>

  <label for="taskType">Task Type</label>
  <select id="taskType">
    <option>Inspection</option>
    <option>Spot Spray</option>
    <option>Road Spray</option>
  </select>

  <label>Location</label>
  <div class="row gap">
    <button id="locateBtn" class="pill">ğŸ“ Locate</button>
    <span id="locRoad" class="tiny">No location yet</span>
  </div>

  <label for="jobName">Job Name</label>
  <div class="row gap">
    <button id="autoNameBtn" class="pill">Auto Name</button>
    <input id="jobName" placeholder="Auto or manual" />
  </div>

  <label for="councilNum">Council Number</label>
  <input id="councilNum" placeholder="Optional" />

  <label for="linkInspectionId">Link Inspection ID</label>
  <input id="linkInspectionId" placeholder="Optional" />

  <div class="grid two tight">
    <div>
      <label for="jobDate">Date</label>
      <input id="jobDate" type="date" />
    </div>
    <div>
      <label for="startTime">Start</label>
      <input id="startTime" type="time" />
    </div>
    <div>
      <label for="endTime">Finish</label>
      <input id="endTime" type="time" />
    </div>
  </div>

  <div id="roadTrackBlock" class="group">
    <label>Roadside Tracking</label>
    <div class="row gap">
      <button id="startTrack" class="pill">â–¶ Start</button>
      <button id="stopTrack" class="pill warn">â¹ Stop</button>
    </div>
    <small id="trackStatus">Idle</small>
  </div>

  <label for="weedSelect">Weed</label>
  <select id="weedSelect"></select>

  <label for="batchSelect">Batch</label>
  <select id="batchSelect"></select>

  <label>Weather</label>
  <div class="grid two tight">
    <input id="temp" placeholder="Temp Â°C" />
    <input id="wind" placeholder="Wind km/h" />
    <input id="windDir" placeholder="Direction Â°" />
    <input id="humidity" placeholder="Humidity %" />
  </div>
  <button id="autoWeatherBtn" class="pill">ğŸŒ¤ Auto Weather</button>
  <div id="wxUpdated" class="tiny"></div>

  <label>Attach Photo</label>
  <input id="photoInput" type="file" accept="image/*" capture="environment" />
  <img id="photoPreview" style="display:none;max-width:100%;border-radius:8px;margin-top:.4rem" alt="preview" />

  <label for="notes">Notes</label>
  <textarea id="notes" rows="3" placeholder="Add notesâ€¦"></textarea>

  <label for="reminderWeeks">Reminder (weeks)</label>
  <select id="reminderWeeks"></select>

  <label>Status</label>
  <div class="row gap">
    <label><input type="radio" name="status" value="Incomplete" checked /> Incomplete</label>
    <label><input type="radio" name="status" value="Complete" /> Complete</label>
    <label><input type="radio" name="status" value="Draft" /> Draft</label>
  </div>

  <div class="row gap">
    <button id="saveTask" class="pill">ğŸ’¾ Save</button>
    <button id="saveDraft" class="pill warn">ğŸ“ Save as Draft</button>
  </div>
</div>

<!-- RECORDS -->
<div id="records" class="screen">
  <button class="home-btn">â¬… Home</button>
  <h2>ğŸ“š Records</h2>

  <div class="filters">
    <label for="recSearch">Search</label>
    <input id="recSearch" placeholder="Job name / weed / councilâ€¦" />
    <div class="grid two tight">
      <div><label for="recFrom">From</label><input id="recFrom" type="date" /></div>
      <div><label for="recTo">To</label><input id="recTo" type="date" /></div>
    </div>
    <fieldset>
      <legend>Type</legend>
      <label><input id="fInspection" type="checkbox" /> Inspection</label>
      <label><input id="fSpot" type="checkbox" /> Spot Spray</label>
      <label><input id="fRoad" type="checkbox" /> Road Spray</label>
    </fieldset>
    <fieldset>
      <legend>Status</legend>
      <label><input id="fComplete" type="checkbox" /> Complete</label>
      <label><input id="fIncomplete" type="checkbox" /> Incomplete</label>
      <label><input id="fDraft" type="checkbox" /> Draft</label>
    </fieldset>
    <div class="row gap">
      <button id="recSearchBtn" class="pill">Search</button>
      <button id="recResetBtn" class="pill warn">Reset</button>
    </div>
  </div>

  <div id="recordsList" class="list"></div>
</div>

<!-- BATCHES -->
<div id="batches" class="screen">
  <button class="home-btn">â¬… Home</button>
  <h2>ğŸ§ª Batches</h2>

  <div class="filters">
    <div class="grid two tight">
      <div><label for="batFrom">From</label><input id="batFrom" type="date" /></div>
      <div><label for="batTo">To</label><input id="batTo" type="date" /></div>
    </div>
    <div class="row gap">
      <button id="batSearchBtn" class="pill">Search</button>
      <button id="batResetBtn" class="pill warn">Reset</button>
    </div>
  </div>

  <div id="batchList" class="list"></div>
  <div class="row end">
    <button id="newBatch" class="pill">â• New Batch</button>
  </div>
</div>

<!-- INVENTORY -->
<div id="inventory" class="screen">
  <button class="home-btn">â¬… Home</button>
  <h2>ğŸ§ª Chemical Inventory</h2>
  <div id="chemList" class="list"></div>
  <div class="row end">
    <button id="addChem" class="pill">â• Add Chemical</button>
  </div>
</div>

<!-- PROCUREMENT -->
<div id="procurement" class="screen">
  <button class="home-btn">â¬… Home</button>
  <h2>ğŸ›’ Procurement</h2>
  <p>Low-stock items auto-populate here based on thresholds.</p>
  <ul id="procList"></ul>
</div>

<!-- MAPPING -->
<div id="mapping" class="screen">
  <button class="home-btn">â¬… Home</button>
  <h2>ğŸ—ºï¸ Mapping</h2>

  <div class="filters">
    <div class="grid two tight">
      <div><label for="mapFrom">From</label><input id="mapFrom" type="date" /></div>
      <div><label for="mapTo">To</label><input id="mapTo" type="date" /></div>
    </div>
    <label for="mapWeed">Filter by weed</label>
    <input id="mapWeed" placeholder="Type a weed nameâ€¦" />
    <label for="mapType">Type</label>
    <select id="mapType">
      <option>All</option>
      <option>Inspection</option>
      <option>Spot Spray</option>
      <option>Road Spray</option>
    </select>
    <div class="row gap">
      <button id="mapSearchBtn" class="pill">Search</button>
      <button id="mapResetBtn" class="pill warn">Reset</button>
    </div>
  </div>

  <div id="map"></div>
</div>

<!-- SETTINGS -->
<div id="settings" class="screen">
  <button class="home-btn">â¬… Home</button>
  <h2>âš™ï¸ Settings & Data</h2>
  <label for="accountEmail">Account Email</label>
  <input id="accountEmail" placeholder="you@email.com" />
  <div class="row gap" style="margin-top:.6rem;">
    <button id="saveAccount" class="pill">Save</button>
    <button id="exportBtn" class="pill">â¬‡ Export</button>
    <button id="restoreBtn" class="pill">â™» Restore</button>
    <button id="clearBtn" class="pill warn">ğŸ—‘ Clear</button>
  </div>
</div>

<!-- CHEMICAL EDIT SHEET (full-screen) -->
<div id="chemEditSheet" class="modal full" style="display:none;">
  <div class="card p">
    <h3>ğŸ§ª Edit Chemical</h3>
    <div class="grid two tight">
      <div><label>Name</label><input id="ce_name"></div>
      <div><label>Active ingredient</label><input id="ce_active"></div>
      <div><label>Container size</label><input id="ce_size" type="number" step="any"></div>
      <div><label>Unit</label><select id="ce_unit"><option>L</option><option>mL</option><option>g</option></select></div>
      <div><label>Containers (count)</label><input id="ce_count" type="number"></div>
      <div><label>Reorder threshold (containers)</label><input id="ce_threshold" type="number"></div>
    </div>
    <div class="row gap end" style="margin-top:1rem;">
      <button id="ce_save" class="pill">ğŸ’¾ Save</button>
      <button id="ce_cancel" class="pill warn">âœ– Cancel</button>
    </div>
  </div>
</div>

<script src="apps.js"></script>
</body>
</html>
